<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïà´Í∏Ä Î≥ÄÌôòÍ∏∞ ( Soowim Ï†úÏûë )</title>
    
    <link rel="shortcut icon" href="icon.ico" type="image/x-icon">
    <link rel="icon" href="icon.ico" type="image/x-icon">

    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background-color: #121212; 
            color: #e0e0e0; 
            line-height: 1.6; 
            display: flex; 
            justify-content: center; 
            padding: 20px; 
        }
        .container { width: 100%; max-width: 600px; margin-top: 20px; position: relative; padding-bottom: 60px; }
        h1 { font-size: 1.5rem; font-weight: 600; margin-bottom: 2rem; text-align: center; letter-spacing: -0.5px; color: #ffffff; }
        .section { margin-bottom: 1.5rem; }
        label { display: block; font-size: 0.85rem; font-weight: 500; margin-bottom: 8px; color: #888; text-transform: uppercase; }
        textarea { 
            width: 100%; 
            height: 140px; 
            padding: 14px; 
            border: 1px solid #333; 
            border-radius: 12px; 
            font-size: 16px; 
            background-color: #1e1e1e; 
            color: #ffffff;
            transition: border-color 0.2s; 
            resize: none;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }
        textarea:focus { outline: none; border-color: #555; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        button { 
            padding: 16px; 
            border: none; 
            border-radius: 12px; 
            background-color: #ffffff; 
            color: #000000; 
            font-size: 0.95rem; 
            font-weight: 600; 
            cursor: pointer; 
            transition: background-color 0.2s; 
        }
        button.secondary { background-color: #333; color: #ffffff; }
        button:active { opacity: 0.8; }
        .result-label { margin-top: 2rem; border-top: 1px solid #222; padding-top: 1.5rem; }
        #result { 
            min-height: 100px; 
            white-space: pre-wrap; 
            word-break: break-all; 
            font-size: 1.15rem; 
            font-weight: 500; 
            color: #ffffff; 
            padding: 10px 0;
            letter-spacing: 0.5px;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.8rem;
            color: #555;
            letter-spacing: 1px;
        }
        @media (max-width: 480px) {
            body { padding: 15px; }
            h1 { font-size: 1.3rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üîê // Ïà´Í∏Ä Î≥ÄÌôòÍ∏∞</h1>
    
    <div class="section">
        <label>Input</label>
        <textarea id="input" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."></textarea>
    </div>

    <div class="btn-group">
        <button onclick="toNum()">ÌïúÍ∏Ä ‚Üí Ïà´Í∏Ä</button>
        <button class="secondary" onclick="toKor()">Ïà´Í∏Ä ‚Üí ÌïúÍ∏Ä</button>
    </div>

    <div class="section result-label">
        <label>Result</label>
        <div id="result"></div>
    </div>

    <footer>Soowim Ï†úÏûë</footer>
</div>

<script>
// (Ïù¥Ï†ÑÍ≥º ÎèôÏùºÌïú JavaScript Î°úÏßÅ)
const initialMap = {'„Ñ±':'1','„Ñ≤':'011','„Ñ¥':'2','„Ñ∑':'3','„Ñ∏':'033','„Ñπ':'4','„ÖÅ':'5','„ÖÇ':'6','„ÖÉ':'066','„ÖÖ':'7','„ÖÜ':'077','„Öá':'8','„Öà':'9','„Öâ':'099','„Öä':'10','„Öã':'11','„Öå':'12','„Öç':'13','„Öé':'14'};
const vowelMap = {'„Öè':['01'],'„Öê':['102'],'„Öë':['02'],'„Öí':['103'],'„Öì':['03'],'„Öî':['104'],'„Öï':['04'],'„Öñ':['105'],'„Öó':['05'],'„Öò':['05','01'],'„Öô':['05','102'],'„Öö':['05','101'],'„Öõ':['06'],'„Öú':['07'],'„Öù':['07','03'],'„Öû':['07','104'],'„Öü':['07','101'],'„Ö†':['08'],'„Ö°':['09'],'„Ö¢':['09','101'],'„Ö£':['101']};
const finalMap = ['','1','011','17','2','29','214','3','4','41','45','46','47','412','413','414','5','6','67','7','077','8','9','10','11','12','13','14'];
const CHOSUNG = ['„Ñ±','„Ñ≤','„Ñ¥','„Ñ∑','„Ñ∏','„Ñπ','„ÖÅ','„ÖÇ','„ÖÉ','„ÖÖ','„ÖÜ','„Öá','„Öà','„Öâ','„Öä','„Öã','„Öå','„Öç','„Öé'];
const JUNGSUNG = ['„Öè','„Öê','„Öë','„Öí','„Öì','„Öî','„Öï','„Öñ','„Öó','„Öò','„Öô','„Öö','„Öõ','„Öú','„Öù','„Öû','„Öü','„Ö†','„Ö°','„Ö¢','„Ö£'];

function wrapZero(str) { return '0' + str + '0'; }
function unwrapZero(str) {
    if (str.startsWith('0') && str.endsWith('0')) return str.substring(1, str.length - 1);
    return str;
}

function toNum() {
    const text = document.getElementById('input').value;
    let result = [];
    for (let char of text) {
        let code = char.charCodeAt(0);
        if (code >= 0xAC00 && code <= 0xD7A3) {
            let n = code - 0xAC00;
            let jong = n % 28;
            let jung = ((n - jong) / 28) % 21;
            let cho = Math.floor(((n - jong) / 28) / 21);
            let parts = [wrapZero(initialMap[CHOSUNG[cho]])];
            vowelMap[JUNGSUNG[jung]].forEach(v => parts.push(wrapZero(v)));
            if (jong > 0) parts.push(wrapZero(finalMap[jong]));
            result.push(parts.join(','));
        } else { result.push(char); }
    }
    let output = "";
    for(let i=0; i<result.length; i++) {
        output += result[i];
        if(i < result.length -1 && result[i] !== " " && result[i+1] !== " " && !/[\n\r]/.test(result[i]) && !/[\n\r]/.test(result[i+1])) {
            if(result[i].includes('0')) output += ".";
        }
    }
    document.getElementById('result').innerText = output;
}

function toKor() {
    const text = document.getElementById('input').value;
    const revInitial = Object.fromEntries(Object.entries(initialMap).map(([k,v]) => [v, CHOSUNG.indexOf(k)]));
    const revVowel = Object.fromEntries(Object.entries(vowelMap).map(([k,v]) => [v.join(','), JUNGSUNG.indexOf(k)]));
    const revFinal = Object.fromEntries(finalMap.map((v, i) => [v, i]));
    let tokens = []; let temp = "";
    for(let char of text) {
        if(char === '.' || char === ' ' || char === '\n') {
            if(temp) tokens.push(temp);
            tokens.push(char); temp = "";
        } else { temp += char; }
    }
    if(temp) tokens.push(temp);
    let finalStr = "";
    for(let token of tokens) {
        if(['.', ' ', '\n'].includes(token)) { if(token !== '.') finalStr += token; continue; }
        let parts = token.split(',').map(p => unwrapZero(p));
        try {
            let choIdx = revInitial[parts[0]];
            let vStr = parts[1]; let vStep = 1;
            if(parts.length >= 3 && revVowel[parts[1]+','+parts[2]] !== undefined) {
                vStr = parts[1]+','+parts[2]; vStep = 2;
            }
            let jungIdx = revVowel[vStr];
            let jongIdx = 0;
            if(parts[1+vStep]) jongIdx = revFinal[parts[1+vStep]] || 0;
            if(choIdx !== undefined && jungIdx !== undefined) {
                finalStr += String.fromCharCode(0xAC00 + (choIdx * 588) + (jungIdx * 28) + jongIdx);
            } else { finalStr += token; }
        } catch(e) { finalStr += token; }
    }
    document.getElementById('result').innerText = finalStr;
}
</script>

</body>
</html>
